<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Signup</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <!-- FontAwesome for icons -->
  </head>
  <body>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()">
      <span id="darkModeIcon">ðŸŒž</span>
      <!-- Sun emoji -->
    </button>

    <div class="container">
      <h2>Signup</h2>
      <form action="#" method="post" onsubmit="return validateSignup()">
        <input type="text" name="username" placeholder="Username" required />
        <input
          type="date"
          name="dob"
          id="dob"
          title="Select your date of birth"
          required
        />
        <input
          type="email"
          name="email"
          placeholder="Email (@gmail.com only)"
          required
        />
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
        />
        <div class="error" id="signupError"></div>
        <button type="submit">Sign Up</button>
      </form>
    </div>

    <script>
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const darkModeStatus = document.body.classList.contains("dark-mode");
        console.log("Dark mode status:", darkModeStatus); // Debugging
        localStorage.setItem("darkMode", darkModeStatus); // Persist dark mode setting
        updateIcon(darkModeStatus);
      }

      function updateIcon(isDarkMode) {
        const icon = document.getElementById("darkModeIcon");
        if (isDarkMode) {
          icon.textContent = "ðŸŒ™"; // Moon emoji
        } else {
          icon.textContent = "ðŸŒž"; // Sun emoji
        }
      }

      window.onload = function () {
        const darkMode = localStorage.getItem("darkMode") === "true";
        console.log("Dark mode on load:", darkMode); // Debugging
        if (darkMode) {
          document.body.classList.add("dark-mode");
          updateIcon(true);
        }
      };

      function validateSignup() {
        const email = document.querySelector('[name="email"]').value;
        const errorDiv = document.getElementById("signupError");

        if (!email.endsWith("@gmail.com")) {
          errorDiv.textContent = "Only @gmail.com emails are allowed.";
          return false;
        }

        return true;
      }
    </script>
  </body>
</html>
